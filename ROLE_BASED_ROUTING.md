# åŸºäºè§’è‰²çš„è·¯ç”±è·³è½¬è¯´æ˜

## âœ… å·²å®ç°çš„åŠŸèƒ½

### ğŸ” ç™»å½•åçš„æ™ºèƒ½è·³è½¬

æ ¹æ®ç”¨æˆ·è§’è‰²ï¼Œç™»å½•åä¼šè‡ªåŠ¨è·³è½¬åˆ°ä¸åŒçš„é¡µé¢ï¼š

#### ğŸ‘¤ æ™®é€šç”¨æˆ· (role: `user`)
ç™»å½•åè·³è½¬åˆ°: **`/forum`** (è®ºå›é¡µé¢)

#### ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜ (role: `admin`)
ç™»å½•åè·³è½¬åˆ°: **`/admin`** (ç®¡ç†é¢æ¿)

### ğŸ“ è·¯ç”±å®ˆå«é€»è¾‘

#### 1. ç™»å½•/æ³¨å†Œé¡µé¢é‡å®šå‘
å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œè®¿é—®ä»¥ä¸‹é¡µé¢ä¼šè‡ªåŠ¨é‡å®šå‘ï¼š
- `/login` â†’ æ ¹æ®è§’è‰²è·³è½¬åˆ° `/forum` æˆ– `/admin`
- `/register` â†’ æ ¹æ®è§’è‰²è·³è½¬åˆ° `/forum` æˆ– `/admin`
- `/` â†’ æ ¹æ®è§’è‰²è·³è½¬åˆ° `/forum` æˆ– `/admin`

#### 2. æƒé™ä¿æŠ¤
- **User** å¯ä»¥è®¿é—®: `/forum`, `/map`
- **Admin** å¯ä»¥è®¿é—®: `/forum`, `/map`, `/admin`
- **æœªç™»å½•ç”¨æˆ·**: è®¿é—®å—ä¿æŠ¤é¡µé¢ä¼šé‡å®šå‘åˆ° `/login?redirect=<ç›®æ ‡é¡µé¢>`

#### 3. æœªæˆæƒè®¿é—®å¤„ç†
å¦‚æœç”¨æˆ·å°è¯•è®¿é—®æ²¡æœ‰æƒé™çš„é¡µé¢ï¼š
- **User** è®¿é—® `/admin` â†’ é‡å®šå‘åˆ° `/forum`
- **Admin** è®¿é—®å—é™é¡µé¢ â†’ é‡å®šå‘åˆ° `/admin`

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: æ™®é€šç”¨æˆ·ç™»å½•
1. æ³¨å†Œè´¦æˆ·ï¼ŒRole é€‰æ‹© `user`
2. ç™»å½•
3. **é¢„æœŸ**: è‡ªåŠ¨è·³è½¬åˆ° `/forum`
4. å¯¼èˆªæ æ˜¾ç¤º: "Hello, [username] (user)"
5. çœ‹ä¸åˆ° "Admin Panel" é“¾æ¥

### åœºæ™¯ 2: ç®¡ç†å‘˜ç™»å½•
1. æ³¨å†Œè´¦æˆ·ï¼ŒRole é€‰æ‹© `admin`
2. ç™»å½•
3. **é¢„æœŸ**: è‡ªåŠ¨è·³è½¬åˆ° `/admin`
4. å¯¼èˆªæ æ˜¾ç¤º: "Hello, [username] (admin)"
5. å¯ä»¥çœ‹åˆ° "Admin Panel" é“¾æ¥

### åœºæ™¯ 3: æ™®é€šç”¨æˆ·å°è¯•è®¿é—®ç®¡ç†é¢æ¿
1. ä»¥æ™®é€šç”¨æˆ·èº«ä»½ç™»å½•
2. æ‰‹åŠ¨è®¿é—® `http://localhost:5173/admin`
3. **é¢„æœŸ**: è‡ªåŠ¨é‡å®šå‘åˆ° `/forum`
4. çœ‹åˆ°"æœªæˆæƒ"æ¶ˆæ¯ï¼ˆå¯é€‰ï¼‰

### åœºæ™¯ 4: å·²ç™»å½•ç”¨æˆ·è®¿é—®ç™»å½•é¡µ
1. ä»¥ä»»ä½•è§’è‰²ç™»å½•
2. è®¿é—® `/login` æˆ– `/register`
3. **é¢„æœŸ**:
   - User â†’ é‡å®šå‘åˆ° `/forum`
   - Admin â†’ é‡å®šå‘åˆ° `/admin`

### åœºæ™¯ 5: é‡å®šå‘å‚æ•°ä¿ç•™
1. æœªç™»å½•çŠ¶æ€è®¿é—® `/map`
2. è¢«é‡å®šå‘åˆ° `/login?redirect=/map`
3. ç™»å½•å
4. **é¢„æœŸ**: è‡ªåŠ¨è·³è½¬å› `/map`ï¼ˆè€Œä¸æ˜¯é»˜è®¤é¡µé¢ï¼‰

## ğŸ“ ä»£ç å®ç°

### LoginView.vue
```javascript
// ç™»å½•æˆåŠŸåæ ¹æ®è§’è‰²è·³è½¬
if (auth.currentUser?.role === 'admin') {
  targetRoute = '/admin'
} else {
  targetRoute = '/forum'
}
```

### router/index.js
```javascript
// è·¯ç”±å®ˆå«
if (auth.isAuthenticated && (to.path === '/login' || to.path === '/register' || to.path === '/')) {
  const defaultRoute = auth.currentUser?.role === 'admin' ? '/admin' : '/forum'
  next(defaultRoute)
  return
}
```

## ğŸ¯ æ•°æ®åº“å­˜å‚¨

### Forum æ•°æ®å·²é›†æˆ Firestore âœ…

Mental Health Forum çš„æ‰€æœ‰å†…å®¹éƒ½å·²ç»è‡ªåŠ¨å­˜å‚¨åˆ° Firebase Firestore æ•°æ®åº“ä¸­ï¼š

#### ğŸ“Š Firestore é›†åˆç»“æ„

1. **`users` é›†åˆ** - å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
```javascript
{
  uid: "user-unique-id",
  email: "user@example.com",
  username: "testuser",
  role: "user" | "admin",
  createdAt: Timestamp,
  lastLogin: Timestamp
}
```

2. **`posts` é›†åˆ** - å­˜å‚¨è®ºå›å¸–å­
```javascript
{
  id: "auto-generated-id",
  title: "å¸–å­æ ‡é¢˜",
  summary: "å¸–å­å†…å®¹",
  author: "ç”¨æˆ·å",
  authorId: "user-uid",
  ratings: [
    { user: "username", userId: "uid", score: 4 }
  ],
  timestamp: Timestamp,
  createdAt: Timestamp,
  updatedAt: Timestamp
}
```

#### âœ… å®æ—¶æ•°æ®åŒæ­¥

- **åˆ›å»ºå¸–å­**: è‡ªåŠ¨ä¿å­˜åˆ° Firestore
- **è¯„åˆ†**: å®æ—¶æ›´æ–°åˆ° Firestore
- **å¤šè®¾å¤‡åŒæ­¥**: åœ¨ä¸åŒæµè§ˆå™¨/è®¾å¤‡æ‰“å¼€åº”ç”¨ï¼Œæ•°æ®å®æ—¶åŒæ­¥

#### ğŸ“ åœ¨ Firebase Console æŸ¥çœ‹æ•°æ®

1. è®¿é—® [Firestore Database](https://console.firebase.google.com/project/fit5032-youthwell-project/firestore)
2. æŸ¥çœ‹é›†åˆ:
   - `users` - æ‰€æœ‰æ³¨å†Œç”¨æˆ·
   - `posts` - æ‰€æœ‰è®ºå›å¸–å­

## ğŸ” éªŒè¯æ¸…å•

- [ ] User ç™»å½•åè·³è½¬åˆ° Forum
- [ ] Admin ç™»å½•åè·³è½¬åˆ° Admin Dashboard
- [ ] User æ— æ³•è®¿é—® /admin
- [ ] Admin å¯ä»¥è®¿é—®æ‰€æœ‰é¡µé¢
- [ ] å·²ç™»å½•ç”¨æˆ·è®¿é—® /login è‡ªåŠ¨é‡å®šå‘
- [ ] æœªç™»å½•ç”¨æˆ·è®¿é—®å—ä¿æŠ¤é¡µé¢é‡å®šå‘åˆ°ç™»å½•
- [ ] ç™»å½•é¡µçš„ redirect å‚æ•°æ­£å¸¸å·¥ä½œ
- [ ] Forum å¸–å­è‡ªåŠ¨ä¿å­˜åˆ° Firestore
- [ ] è¯„åˆ†å®æ—¶æ›´æ–°åˆ°æ•°æ®åº“
- [ ] åœ¨ Firebase Console èƒ½çœ‹åˆ°æ•°æ®

---

**æ‰€æœ‰è·¯ç”±é€»è¾‘å·²ä¼˜åŒ–å®Œæˆï¼** ç°åœ¨å¯ä»¥æµ‹è¯•ä¸åŒè§’è‰²çš„ç™»å½•ä½“éªŒã€‚
